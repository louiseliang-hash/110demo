<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>110 è¦–è¨Šå ±æ¡ˆ LIFF</title>
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        :root { --line-green: #00b900; --police-red: #ff3b30; --dark-bg: #1c1c1e; }
        body { margin: 0; padding: 0; background-color: var(--dark-bg); font-family: sans-serif; color: white; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* é é¢åˆ‡æ›æ©Ÿåˆ¶ */
        .page { display: none; width: 100%; height: 100%; flex-direction: column; }
        .page.active { display: flex; }

        /* é ‚éƒ¨æ¨™é¡Œ */
        .header { background: #2c2c2e; padding: 15px; text-align: center; font-weight: bold; font-size: 1.1rem; border-bottom: 1px solid #3a3a3c; }

        /* ä¸­é–“è¦–è¨Šæ¨¡æ“¬å€ */
        .video-container { flex-grow: 1; position: relative; background: #000; overflow: hidden; }
        .video-bg { width: 100%; height: 100%; object-fit: cover; opacity: 0.6; }
        .self-view { position: absolute; top: 15px; right: 15px; width: 90px; height: 130px; background: #333; border: 2px solid white; border-radius: 12px; z-index: 10; display: flex; align-items: center; justify-content: center; font-size: 10px; }

        /* ç·Šæ€¥å°è©±é®ç½© */
        #textChatOverlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 100; display: none; flex-direction: column; padding: 25px; }
        .chat-bubble { background: white; color: #333; padding: 15px; border-radius: 12px; margin-bottom: 25px; font-size: 14px; line-height: 1.5; }
        .quick-btn { background: var(--police-red); color: white; border: none; padding: 18px; border-radius: 12px; margin-bottom: 12px; font-weight: bold; font-size: 16px; cursor: pointer; }

        /* åº•éƒ¨æ§åˆ¶å€ */
        .controls { padding: 25px 20px; background: var(--dark-bg); text-align: center; }
        .mode-toggle { background: #3a3a3c; border-radius: 15px; padding: 15px; width: 100%; border: none; cursor: pointer; margin-bottom: 15px; }
        .call-btn { width: 80px; height: 80px; background: var(--police-red); border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center; margin: 0 auto; cursor: pointer; box-shadow: 0 0 20px rgba(255, 59, 48, 0.4); }
    </style>
</head>
<body>

    <div id="prepPage" class="page active">
        <div class="header">110 è¦–è¨Šå ±æ¡ˆä¸­å¿ƒ</div>
        <div style="flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px;">
            <div style="font-size: 1.4rem; font-weight: bold; margin-bottom: 10px;">å°åŒ—å¸‚æ”¿åºœè­¦å¯Ÿå±€</div>
            <div style="color: var(--line-green); font-size: 14px; margin-bottom: 40px;">â— GPS å®šä½å·²å°±ç·’</div>
            
            <button class="call-btn" onclick="handleCall()">
                <img src="https://img.icons8.com/ios-filled/40/white/phone.png">
            </button>
            <div style="margin-top: 20px; font-weight: bold;">é»æ“ŠæŒ‰éˆ•é–‹å§‹è¦–è¨Šå ±æ¡ˆ</div>
        </div>
    </div>

    <div id="callPage" class="page">
        <div class="header">è¦–è¨Šé€šè©±é€²è¡Œä¸­</div>
        <div class="video-container">
            <div class="self-view">æ‚¨çš„å½±åƒ</div>
            <img class="video-bg" src="https://images.unsplash.com/photo-1590103512238-3354f5ee8903?auto=format&fit=crop&w=500&q=80">
            
            <div id="textChatOverlay">
                <div style="text-align: right; margin-bottom: 15px;">
                    <button onclick="closeChat()" style="background:none; border:none; color:white; font-size:24px;">âœ•</button>
                </div>
                <div class="chat-bubble">è­¦æ–¹å·²æ”¶åˆ°å®šä½ã€‚è‹¥æ‚¨ç„¡æ³•èªªè©±ï¼Œè«‹é»é¸ï¼š</div>
                <button class="quick-btn" onclick="sendAlert('æˆ‘é‡åˆ°é—–ç©ºé–€ç„¡æ³•è¬›è©±')">âš ï¸ æˆ‘é‡åˆ°é—–ç©ºé–€ç„¡æ³•è¬›è©±</button>
                <button class="quick-btn" onclick="sendAlert('æˆ‘è¢«ç¶æ¶äº†')">ğŸš¨ æˆ‘è¢«ç¶æ¶äº†</button>
                <div id="statusMsg" style="color: var(--line-green); text-align: center; display: none;">âœ“ è¨Šæ¯å·²åŠ å¯†å‚³é€</div>
            </div>
        </div>

        <div class="controls">
            <button class="mode-toggle" onclick="openChat()">
                <div style="color: var(--police-red); font-weight: bold; margin-bottom: 4px;">åˆ‡æ›æ¨¡å¼</div>
                <div style="color: #aeaeb2; font-size: 12px;">ç„¡æ³•è¬›è©±ï¼Ÿé»æ­¤å‚³é€å¿«é¸è¨Šæ¯</div>
            </button>
            <button onclick="location.reload()" style="background:none; border:none; color:#666; font-size:12px; cursor:pointer;">çµæŸé€šè©±</button>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ– LIFF
        liff.init({ liffId: "1534771128-vDM92p02" }).then(() => {
            console.log("LIFF Initialized");
        }).catch((err) => {
            console.error("LIFF Initialization failed", err);
        });

        function handleCall() {
            // åˆ‡æ›åˆ°è¦–è¨Šé é¢ UI
            document.getElementById('prepPage').classList.remove('active');
            document.getElementById('callPage').classList.add('active');
            
            // å¯ä»¥åœ¨æ­¤è™•åŠ å…¥çœŸæ­£çš„ LINE Planet æ’¥è™Ÿé‚è¼¯
            console.log("Calling via LINE Planet...");
        }

        function openChat() { document.getElementById('textChatOverlay').style.display = 'flex'; }
        function closeChat() { document.getElementById('textChatOverlay').style.display = 'none'; }
        
        function sendAlert(msg) {
            document.getElementById('statusMsg').innerText = "âœ“ å·²ç™¼é€ï¼š" + msg;
            document.getElementById('statusMsg').style.display = 'block';
            
            // æ¨¡æ“¬ SDK å‚³é€æŒ‡ä»¤çµ¦è­¦æ–¹
            setTimeout(closeChat, 2000);
        }
    </script>
</body>
</html>
